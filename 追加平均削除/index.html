<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button onclick="addList()">Add</button>
    <p class="ave"></p>
    <div class="lists"></div>
</body>

</html>
<script>
    const lists=document.querySelector(".lists")
    const ave=document.querySelector(".ave")

    addList()
    function addList(){
        const list=document.createElement("div")
        const input=document.createElement("input")
        const btn=document.createElement("button")
        list.classList.add("list")
        btn.textContent="Delete"
        btn.addEventListener("click",()=>{
            const flag=checkListNum()
            console.log(flag);
            
            if(flag){
                list.remove()
                calcAverage()
            }
        })
        input.type = "number"
        input.value=0
        input.addEventListener("input",()=>{
            console.log("input");
            
            calcAverage()
        })
        list.appendChild(input)
        list.appendChild(btn)
        lists.appendChild(list)
        calcAverage()
    }

    function checkListNum(){
        const listNum = document.querySelectorAll(".list")
        if(listNum.length>1){
            return true
        }else{
            return false
        }
    }
    
    function calcAverage(){
        const listNum = document.querySelectorAll(".list")
        let sum =0
        listNum.forEach(element => {
            sum+=Number(element.querySelector("input").value)
        });
        const average=sum/listNum.length
        console.log(listNum);
        
        ave.textContent="平均値:"+average
    }
</script>
<style>

</style>